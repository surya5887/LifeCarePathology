{% extends 'admin/admin_base.html' %}
{% block title %}Enquiries{% endblock %}
{% block page_title %}Contact Enquiries{% endblock %}

{% block content %}
<style>
    .enquiries-grid { display: grid; gap: 16px; }
    .enquiry-card {
        background: var(--admin-surface); border: 1px solid var(--admin-border);
        border-radius: var(--admin-radius); padding: 20px;
        transition: var(--admin-transition);
    }
    .enquiry-card.unread { border-left: 3px solid var(--admin-primary); }
    .enquiry-card:hover { border-color: var(--admin-primary); }
    .enquiry-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; flex-wrap: wrap; gap: 8px; }
    .enquiry-header h3 { font-size: 16px; font-weight: 700; }
    .enquiry-meta { display: flex; gap: 16px; margin-top: 4px; }
    .enquiry-meta span { font-size: 12px; color: var(--admin-text-muted); display: flex; align-items: center; gap: 4px; }
    .enquiry-date { text-align: right; font-size: 12px; color: var(--admin-text-muted); }
    .unread-badge {
        display: inline-block; background: var(--admin-primary);
        color: #fff; font-size: 10px; font-weight: 700;
        padding: 2px 8px; border-radius: 4px; margin-left: 8px;
    }
    .enquiry-message { font-size: 14px; color: var(--admin-text-muted); line-height: 1.6; margin-bottom: 12px; }
</style>

<div class="admin-page-header">
    <div>
        <h1><i class="fas fa-envelope"></i> Contact <span class="gradient-text">Enquiries</span></h1>
        <p>Messages received from the contact form.</p>
    </div>
</div>

{% if enquiries %}
<div class="enquiries-grid">
    {% for e in enquiries %}
    <div class="enquiry-card {{ 'unread' if not e.is_read else '' }}">
        <div class="enquiry-header">
            <div>
                <h3>{{ e.name }}</h3>
                <div class="enquiry-meta">
                    {% if e.email %}<span><i class="fas fa-envelope"></i> {{ e.email }}</span>{% endif %}
                    {% if e.phone %}<span><i class="fas fa-phone"></i> {{ e.phone }}</span>{% endif %}
                </div>
            </div>
            <div class="enquiry-date">
                <span>{{ e.created_at.strftime('%d %b %Y') }}</span>
                {% if not e.is_read %}<span class="unread-badge">New</span>{% endif %}
            </div>
        </div>
        <p class="enquiry-message">{{ e.message }}</p>
        <div class="action-buttons">
            {% if not e.is_read %}
            <form method="POST" action="{{ url_for('admin.mark_read', enquiry_id=e.id) }}">
                <button type="submit" class="btn btn-sm btn-outline">
                    <i class="fas fa-check"></i> Mark as Read
                </button>
            </form>
            {% endif %}
            <form method="POST" action="{{ url_for('admin.delete_enquiry', enquiry_id=e.id) }}" onsubmit="return confirm('Delete enquiry?')">
                <button type="submit" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <div class="empty-icon">ðŸ“¬</div>
    <h3>No enquiries yet</h3>
    <p>Contact form messages will appear here.</p>
</div>
{% endif %}
{% endblock %}
